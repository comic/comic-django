{% load url %}
{% load profiles %}
{% load workstations %}
{% load guardian_tags %}
{% load pathlib %}
{% load humanize %}
{% load evaluation_extras %}

{{ result.job.created|naturaltime }}
<td>
    {{ result.job.creator|user_profile_link }}
<td>
    <a href="#resultInfoModal"
       class="badge badge-primary"
       data-toggle="modal"
       data-target="#resultInfoModal"
       data-title="Result Info"
       data-output="{% firstof result.output 'No output produced.' %}"
       data-pk="{{ result.pk }}"
       title="Result Info">
        <i class="fa fa-file"></i> {{ result.job.image.name }}
    </a>
<td>
    {% if result.public %}
        <i class="fa fa-eye text-success"
           title="Result is public"></i>
    {% else %}
        <i class="fa fa-eye-slash text-danger"
           title="Result is private"></i>
    {% endif %}
<td>
    <ul class="list-unstyled">
        {% if result.job.image %}
            <li>
                <a href="{% url 'workstations:workstation-session-create' slug=algorithm.workstation.slug %}?{% workstation_query algorithm_result=result config=algorithm.workstation_config %}">
                    <span class="badge badge-primary"
                          title="View algorithm result">
                        <i class="fa fa-eye"></i> View Result
                    </span>
                </a>
            </li>
        {% endif %}
        {% for image in result.images.all %}
            {% for file in image.files.all %}
                <li>
                    <a href="{{ file.file.url }}">
                        <span class="badge badge-primary" title="Download Output {{ forloop.parentloop.counter }} {{ image.name|stem }} ({{ file.file|suffix }})">
                            <i class="fa fa-download"></i> Output {{ forloop.parentloop.counter }} ({{ file.file|suffix }})
                        </span>
                    </a>
                </li>
            {% endfor %}
        {% empty %}
            <li>
                <span class="badge badge-warning"
                      title="No output images were found">
                    <i class="fa fa-eye-slash"></i>
                </span>
            </li>
        {% endfor %}
        {% for file in result.job.image.files.all %}
            <li>
                <a href="{{ file.file.url }}">
                    <span class="badge badge-primary" title="Download Input {{ result.job.image.name|stem }} ({{ file.file|suffix }})">
                        <i class="fa fa-download"></i> Input ({{ file.file|suffix }})
                    </span>
                </a>
            </li>
        {% endfor %}
    </ul>
<td>
    {% if result.comment %}
        <a href="#resultInfoModal"
           class="badge badge-primary"
           data-toggle="modal"
           data-target="#resultInfoModal"
           data-title="Result Comment"
           data-output="{{ result.comment }}"
           data-pk="{{ result.pk }}"
           title="Result Comment">
            <i class="fa fa-file"></i>
        </a>
    {% endif %}
    {% if change_result %}
        <a href="{% url 'algorithms:result-update' slug=algorithm.slug pk=result.pk %}">
            <span class="badge badge-primary" title="Edit result">
                <i class="fa fa-edit"></i>
            </span>
        </a>
    {% endif %}
